(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editFood"],{"1f09":function(t,e,i){},3129:function(t,e,i){"use strict";i("1f09");var a=i("c995"),s=i("24b2"),n=i("7560"),r=i("58df"),o=i("80d2");e["a"]=Object(r["a"])(a["a"],s["a"],n["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:()=>({})}},computed:{attrs(){return this.isLoading?this.boilerplate?{}:{"aria-busy":!0,"aria-live":"polite",role:"alert",...this.$attrs}:this.$attrs},classes(){return{"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile,...this.themeClasses,...this.elevationClasses}},isLoading(){return!("default"in this.$scopedSlots)||this.loading},rootTypes(){return{actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text",...this.types}}},methods:{genBone(t,e){return this.$createElement("div",{staticClass:`v-skeleton-loader__${t} v-skeleton-loader__bone`},e)},genBones(t){const[e,i]=t.split("@"),a=()=>this.genStructure(e);return Array.from({length:i}).map(a)},genStructure(t){let e=[];t=t||this.type||"";const i=this.rootTypes[t]||"";if(t===i);else{if(t.indexOf(",")>-1)return this.mapBones(t);if(t.indexOf("@")>-1)return this.genBones(t);i.indexOf(",")>-1?e=this.mapBones(i):i.indexOf("@")>-1?e=this.genBones(i):i&&e.push(this.genStructure(i))}return[this.genBone(t,e)]},genSkeleton(){const t=[];return this.isLoading?t.push(this.genStructure()):t.push(Object(o["r"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},t):t},mapBones(t){return t.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter(t){this.resetStyles(t),this.isLoading&&(t._initialStyle={display:t.style.display,transition:t.style.transition},t.style.setProperty("transition","none","important"))},onBeforeLeave(t){t.style.setProperty("display","none","important")},resetStyles(t){t._initialStyle&&(t.style.display=t._initialStyle.display||"",t.style.transition=t._initialStyle.transition,delete t._initialStyle)}},render(t){return t("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},8355:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"card-form",attrs:{elevation:"2"}},[i("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("h1",[t._v("Edit Food")]),i("div",{staticClass:"form-group"},[i("v-card",{staticClass:"mx-auto",attrs:{elevation:"0",outlined:""}},[t.load?i("v-sheet",{staticClass:"pa-3",attrs:{color:"grey lighten-4"}},[i("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"article"}})],1):i("v-container",[i("v-text-field",{staticClass:"form-control",attrs:{rules:[this.rules.required],label:"Name*","hide-details":"auto"},model:{value:t.food.name,callback:function(e){t.$set(t.food,"name",e)},expression:"food.name"}})],1)],1),t.load?t._e():i("v-card",{staticClass:"mx-auto",attrs:{elevation:"0",outlined:""}},[i("v-container",[i("v-col",{staticClass:"d-flex justify-content-between"},[i("h2",[t._v("Nutrition Facts")]),i("div",[t.nutritionFacts?i("v-btn",{staticClass:"mx-0 my-0",attrs:{fab:"","x-small":"",dark:"",color:"red"},on:{click:t.changeNutritionFacts}},[i("v-icon",{attrs:{dark:""}},[t._v(" mdi-minus ")])],1):i("v-btn",{staticClass:"mx-0 my-0",attrs:{fab:"","x-small":"",color:"primary"},on:{click:t.changeNutritionFacts}},[i("v-icon",{attrs:{dark:""}},[t._v(" mdi-plus ")])],1)],1)]),t.nutritionFacts?i("div",[i("v-row",[i("v-col",[i("v-text-field",{staticClass:"form-control",attrs:{type:"number",label:"Serving Size*","hide-details":"auto",rules:[function(t){return!!t||"Required."}]},model:{value:t.food.nutrition_facts.serving_size,callback:function(e){t.$set(t.food.nutrition_facts,"serving_size",t._n(e))},expression:"food.nutrition_facts.serving_size"}})],1),i("v-col",[i("v-select",{attrs:{items:t.nutrition_facts_measures,"item-text":"name","item-value":"id",label:"Select a Measure*",rules:[function(t){return!!t||"Required."}],"return-value":""},model:{value:t.food.nutrition_facts.serving_size_unit,callback:function(e){t.$set(t.food.nutrition_facts,"serving_size_unit",e)},expression:"food.nutrition_facts.serving_size_unit"}})],1)],1)],1):t._e()],1)],1),t.nutritionFacts?i("v-card",{staticClass:"mx-auto",attrs:{elevation:"0",outlined:""}},[i("v-container",[i("v-col",{staticClass:"d-flex justify-content-between"},[i("h2",[t._v("Nutritients")]),i("div",[i("v-btn",{staticClass:"mx-0 my-0",attrs:{fab:"","x-small":"",color:"primary"},on:{click:t.addNutrientField}},[i("v-icon",{attrs:{dark:""}},[t._v(" mdi-plus ")])],1)],1)]),t._l(this.food.nutrition_facts.nutrition_facts_nutrients,(function(e,a){return i("div",{key:a,staticClass:"nutrition_facts_nutrients"},[i("v-card",{attrs:{outlined:"",shaped:""}},[i("v-container",[i("v-row",[i("v-col",{staticClass:"d-flex align-center justify-center",attrs:{cols:"12",sm:"2"}},[i("v-btn",{staticClass:"mx-0",attrs:{fab:"","x-small":"",dark:"",color:"red"},on:{click:function(e){return t.removeNutrientField(a)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-minus")])],1)],1),i("v-col",{staticClass:"pl-0",attrs:{cols:"12",sm:"10"}},[i("v-row",[i("v-col",[i("v-select",{attrs:{items:t.nutrients,"item-text":"name","item-value":"id",label:"Select a Nutrient*",rules:[function(t){return!!t||"Required."}],"return-value":""},model:{value:e.nutrient_id,callback:function(i){t.$set(e,"nutrient_id",i)},expression:"nut_facts_nut.nutrient_id"}})],1),i("v-col",[i("v-text-field",{staticClass:"form-control",attrs:{rules:[function(t){return!!t||"Required."}],type:"number",label:"Amount per serving (g)*","hide-details":"auto"},model:{value:e.amount_per_serving,callback:function(i){t.$set(e,"amount_per_serving",t._n(i))},expression:"nut_facts_nut.amount_per_serving"}})],1)],1)],1)],1)],1)],1)],1)}))],2)],1):t._e(),i("v-card-actions",[i("v-row",{attrs:{justify:"center"}},[t.submit?i("v-btn",{staticClass:"submit",attrs:{color:"primary",loading:"",disabled:!t.valid}}):i("v-btn",{staticClass:"submit",attrs:{type:"submit",elevation:"2",color:"primary",disabled:!t.valid}},[i("span",[t._v(" Save ")])]),i("v-btn",{attrs:{elevation:"2"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("Back")])],1)],1)],1)])],1)},s=[],n=i("365c"),r=i("b628"),o={name:"EditFood",data(){return{load:!0,foodId:this.$route.params.id,valid:!1,submit:!1,nutritionFacts:!1,food:{name:"",nutrition_facts:null},nutrition_facts_measures:[],nutrition_facts:null,nutrients:[],rules:{required:t=>!!t||"Required."}}},methods:{changeNutritionFacts:function(){this.nutritionFacts?(this.nutrition_facts=this.food.nutrition_facts,this.nutritionFacts=!1,delete this.food.nutrition_facts):(this.nutrition_facts?this.food.nutrition_facts=this.nutrition_facts:this.food={id:this.food.id,name:this.food.name,nutrition_facts:{serving_size_unit:null,nutrition_facts_nutrients:[]}},this.nutritionFacts=!0)},addNutrientField:function(){this.food.nutrition_facts.nutrition_facts_nutrients.push({})},removeNutrientField:function(t){this.food.nutrition_facts.nutrition_facts_nutrients.splice(t,1)},onSubmit:function(){this.submit=!0,this.$refs.form.validate()?(this.food.nutrition_facts&&this.food.nutrition_facts.nutrition_facts_nutrients.length>0&&this.food.nutrition_facts.nutrition_facts_nutrients.map(t=>{t.amount_per_serving_unit=1}),Object(n["w"])(this.foodId,this.food).then(t=>{console.log(t),this.$router.push({name:"ListFood"})}).catch(t=>{this.submit=!1,console.log(t.response)})):this.submit=!1},getNutrients(){Object(n["l"])().then(t=>{this.nutrients=t.data}).catch(t=>{console.log(t.response)})},getFood(){Object(n["j"])(this.foodId).then(t=>{this.food=t.data,this.food.nutrition_facts&&(this.nutritionFacts=!0)}).catch(t=>{console.log(t.response)}).finally(()=>{this.load=!1})}},created(){this.getFood(),this.nutrition_facts_measures=r["a"].state.nutrition_facts_measures,this.getNutrients()}},l=o,c=i("2877"),u=i("6544"),d=i.n(u),f=i("8336"),v=i("b0af"),h=i("99d9"),m=i("62ad"),_=i("a523"),p=i("4bd4"),b=i("132d"),g=i("0fd9"),y=i("b974"),x=i("8dd9"),k=i("3129"),S=i("8654"),C=Object(c["a"])(l,a,s,!1,null,null,null);e["default"]=C.exports;d()(C,{VBtn:f["a"],VCard:v["a"],VCardActions:h["a"],VCol:m["a"],VContainer:_["a"],VForm:p["a"],VIcon:b["a"],VRow:g["a"],VSelect:y["a"],VSheet:x["a"],VSkeletonLoader:k["a"],VTextField:S["a"]})}}]);
//# sourceMappingURL=editFood.e958ce5c.js.map