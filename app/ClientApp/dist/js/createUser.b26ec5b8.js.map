{"version":3,"sources":["webpack:///./src/views/Users/Create.vue?c950","webpack:///./src/views/Users/Create.vue?673a","webpack:///src/views/Users/Create.vue","webpack:///./src/views/Users/Create.vue?d9cd","webpack:///./src/views/Users/Create.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","on","$event","preventDefault","onSubmit","model","value","callback","$$v","valid","expression","_v","rules","required","user","$set","email","passwordConfirmationRule","repeatPassword","roles","roleId","_e","submit","$router","go","staticRenderFns","username","first_name","last_name","password","pattern","test","methods","$refs","form","validate","id","isAdmin","then","result","push","name","catch","error","console","log","response","registerResult","data","token_type","access_token","Promise","all","$store","dispatch","finally","doLogin","getRoles","computed","component","VBtn","VCard","VCardActions","VContainer","VForm","VRow","VSelect","VTextField"],"mappings":"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","file":"js/createUser.b26ec5b8.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=2b65db14&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"card-form\",attrs:{\"elevation\":\"2\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('h1',[_vm._v(\"Create User\")]),_c('div',{staticClass:\"form-group\"},[_c('v-card',{staticClass:\"mx-auto\",attrs:{\"elevation\":\"0\",\"outlined\":\"\"}},[_c('v-container',[_c('v-text-field',{staticClass:\"form-control\",attrs:{\"rules\":[_vm.rules.required],\"label\":\"FirstName*\",\"hide-details\":\"auto\"},model:{value:(_vm.user.first_name),callback:function ($$v) {_vm.$set(_vm.user, \"first_name\", $$v)},expression:\"user.first_name\"}}),_c('v-text-field',{staticClass:\"form-control\",attrs:{\"rules\":[_vm.rules.required],\"label\":\"LastName*\",\"hide-details\":\"auto\"},model:{value:(_vm.user.last_name),callback:function ($$v) {_vm.$set(_vm.user, \"last_name\", $$v)},expression:\"user.last_name\"}}),_c('v-text-field',{staticClass:\"form-control\",attrs:{\"rules\":[_vm.rules.required],\"label\":\"Username*\",\"hide-details\":\"auto\"},model:{value:(_vm.user.username),callback:function ($$v) {_vm.$set(_vm.user, \"username\", $$v)},expression:\"user.username\"}}),_c('v-text-field',{staticClass:\"form-control\",attrs:{\"rules\":[_vm.rules.required, _vm.rules.email],\"label\":\"Email*\",\"hide-details\":\"auto\"},model:{value:(_vm.user.email),callback:function ($$v) {_vm.$set(_vm.user, \"email\", $$v)},expression:\"user.email\"}}),_c('v-text-field',{staticClass:\"form-control\",attrs:{\"rules\":[_vm.rules.required],\"label\":\"Password*\",\"type\":'password',\"hide-details\":\"auto\"},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_c('v-text-field',{staticClass:\"form-control\",attrs:{\"rules\":[_vm.rules.required, _vm.passwordConfirmationRule],\"label\":\"RepeatPassword*\",\"type\":'password',\"hide-details\":\"auto\"},model:{value:(_vm.repeatPassword),callback:function ($$v) {_vm.repeatPassword=$$v},expression:\"repeatPassword\"}}),(_vm.isAdmin)?_c('v-select',{attrs:{\"items\":_vm.roles,\"rules\":[_vm.rules.required],\"item-text\":\"name\",\"item-value\":\"id\",\"label\":\"Select a Role*\",\"return-value\":\"\",\"hide-details\":\"auto\"},model:{value:(_vm.roleId),callback:function ($$v) {_vm.roleId=$$v},expression:\"roleId\"}}):_vm._e()],1)],1),_c('v-card-actions',[_c('v-row',{attrs:{\"justify\":\"center\"}},[(!_vm.submit)?_c('v-btn',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"elevation\":\"2\",\"color\":\"primary\",\"disabled\":!_vm.valid}},[_c('span',[_vm._v(\" Create \")])]):_c('v-btn',{staticClass:\"submit\",attrs:{\"color\":\"primary\",\"loading\":\"\",\"disabled\":!_vm.valid}}),_c('v-btn',{attrs:{\"elevation\":\"2\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"Back\")])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card elevation=\"2\" class=\"card-form\">\r\n    <v-form\r\n      ref=\"form\"\r\n      lazy-validation\r\n      @submit.prevent=\"onSubmit\"\r\n      v-model=\"valid\"\r\n    >\r\n      <h1>Create User</h1>\r\n      <div class=\"form-group\">\r\n        <v-card class=\"mx-auto\" elevation=\"0\" outlined>\r\n          <v-container>\r\n            <v-text-field\r\n              v-model=\"user.first_name\"\r\n              :rules=\"[rules.required]\"\r\n              label=\"FirstName*\"\r\n              hide-details=\"auto\"\r\n              class=\"form-control\"\r\n            />\r\n\r\n            <v-text-field\r\n              v-model=\"user.last_name\"\r\n              :rules=\"[rules.required]\"\r\n              label=\"LastName*\"\r\n              hide-details=\"auto\"\r\n              class=\"form-control\"\r\n            />\r\n\r\n            <v-text-field\r\n              v-model=\"user.username\"\r\n              :rules=\"[rules.required]\"\r\n              label=\"Username*\"\r\n              hide-details=\"auto\"\r\n              class=\"form-control\"\r\n            />\r\n\r\n            <v-text-field\r\n              v-model=\"user.email\"\r\n              :rules=\"[rules.required, rules.email]\"\r\n              label=\"Email*\"\r\n              hide-details=\"auto\"\r\n              class=\"form-control\"\r\n            />\r\n\r\n            <v-text-field\r\n              v-model=\"user.password\"\r\n              :rules=\"[rules.required]\"\r\n              label=\"Password*\"\r\n              :type=\"'password'\"\r\n              class=\"form-control\"\r\n              hide-details=\"auto\"\r\n            />\r\n\r\n            <v-text-field\r\n              v-model=\"repeatPassword\"\r\n              :rules=\"[rules.required, passwordConfirmationRule]\"\r\n              label=\"RepeatPassword*\"\r\n              :type=\"'password'\"\r\n              class=\"form-control\"\r\n              hide-details=\"auto\"\r\n            />\r\n\r\n            <v-select\r\n              v-if=\"isAdmin\"\r\n              v-model=\"roleId\"\r\n              :items=\"roles\"\r\n              :rules=\"[rules.required]\"\r\n              item-text=\"name\"\r\n              item-value=\"id\"\r\n              label=\"Select a Role*\"\r\n              return-value\r\n              hide-details=\"auto\"\r\n            />\r\n          </v-container>\r\n        </v-card>\r\n        <v-card-actions>\r\n          <v-row justify=\"center\">\r\n            <v-btn\r\n              class=\"submit\"\r\n              type=\"submit\"\r\n              elevation=\"2\"\r\n              color=\"primary\"\r\n              v-if=\"!submit\"\r\n              :disabled=\"!valid\"\r\n            >\r\n              <span> Create </span>\r\n            </v-btn>\r\n            <v-btn\r\n              v-else\r\n              color=\"primary\"\r\n              class=\"submit\"\r\n              loading\r\n              :disabled=\"!valid\"\r\n            >\r\n            </v-btn>\r\n\r\n            <v-btn elevation=\"2\" @click=\"$router.go(-1)\">Back</v-btn>\r\n          </v-row>\r\n        </v-card-actions>\r\n      </div>\r\n    </v-form>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  createUser,\r\n  registerUser,\r\n  getRoles,\r\n  login,\r\n  createAuthAPI,\r\n} from \"@/api\";\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      valid: false,\r\n      submit: false,\r\n      user: {\r\n        username: \"\",\r\n        email: \"\",\r\n        first_name: \"\",\r\n        last_name: \"\",\r\n        password: \"\",\r\n        roles: [],\r\n      },\r\n      roles: [],\r\n      roleId: \"00000000-0000-0000-0000-000000000000\",\r\n      repeatPassword: \"\",\r\n      rules: {\r\n        required: (value) => !!value || \"Required.\",\r\n        email: (value) => {\r\n          const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n          return pattern.test(value) || \"Invalid e-mail.\";\r\n        },\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"doLogin\"]),\r\n    onSubmit: function () {\r\n      this.submit = true;\r\n      if (this.$refs.form.validate()) {\r\n        if (this.roleId != \"\") this.user.roles = [{ id: this.roleId }];\r\n        if (this.isAdmin) {\r\n          createUser(this.user)\r\n            .then((result) => {\r\n              this.$router.push({ name: \"ListUser\" });\r\n            })\r\n            .catch((error) => {\r\n              console.log(error.response);\r\n              this.submit = false;\r\n            });\r\n        } else {\r\n          registerUser(this.user)\r\n            .then((registerResult) => {\r\n              login(this.user)\r\n                .then((result) => {\r\n                  createAuthAPI(\r\n                    result.data.token_type,\r\n                    result.data.access_token\r\n                  );\r\n                  Promise.all([\r\n                    this.$store.dispatch(\"ActionSetUser\", registerResult.data),\r\n                  ]).finally(() => {\r\n                    this.doLogin(result.data);\r\n                    this.$router.push({ name: \"ListRecipe\" });\r\n                  });\r\n                })\r\n                .catch((error) => {\r\n                  console.log(error);\r\n                  this.submit = false;\r\n                  // this.valid = true;\r\n                });\r\n            })\r\n            .catch((error) => {\r\n              console.log(error.response);\r\n              this.submit = false;\r\n            });\r\n        }\r\n      } else {\r\n        this.submit = false;\r\n      }\r\n    },\r\n\r\n    getRoles() {\r\n      getRoles()\r\n        .then((result) => {\r\n          this.roles = result.data;\r\n          this.roles.push({\r\n            id: \"00000000-0000-0000-0000-000000000000\",\r\n            name: \"User\",\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.response);\r\n        });\r\n    },\r\n  },\r\n\r\n  created() {\r\n    if (this.isAdmin) this.getRoles();\r\n  },\r\n\r\n  computed: {\r\n    passwordConfirmationRule() {\r\n      return () =>\r\n        this.user.password === this.repeatPassword || \"Password must match\";\r\n    },\r\n    ...mapGetters([\"isAdmin\"]),\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.theme--light.v-btn--active::before {\r\n  opacity: 0 !important;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Create.vue?vue&type=template&id=2b65db14&scoped=true&\"\nimport script from \"./Create.vue?vue&type=script&lang=js&\"\nexport * from \"./Create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Create.vue?vue&type=style&index=0&id=2b65db14&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b65db14\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VContainer,VForm,VRow,VSelect,VTextField})\n"],"sourceRoot":""}